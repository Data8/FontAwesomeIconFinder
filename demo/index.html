<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Font Awesome Icon Finder Demo</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="../dist/fontawesomeiconfinder.css">
        <!-- Using Bulma.io for some quick and easy stlying -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css">
        <script type="text/javascript" src="../dist/fontawesomeiconfinder.trie.js"></script>
        <script type="text/javascript" src="../dist/fontawesomeiconfinder.manager.js"></script>
        <style>
            .log {
                height: 15rem;
                overflow-y: scroll;
            }
        </style>
    </head>
    <body>
        <section class="hero is-medium is-primary is-bold">
            <div class="hero-body">
                <div class="container">
                    <label for="search" class="title">Search</label>
                    <input name="search" class="iconSearch input" type="text">
                    <div class="selectedLabel"></div>
                    <div id="log" class="log"></div>
                </div>
            </div>
        </section>

        <!-- Icons and Search -->
        <div id="container" class="icons">
            <div class="result" style="height: 100%; overflow-y: auto;"></div>
        </div>

        <script type="text/javascript">
 
            function fireWhenReady(fn) {
                if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading"){
                    fn();
                } else {
                    document.addEventListener('DOMContentLoaded', fn);
                }
            }
            
            fireWhenReady(() => {
                // hijack console.log 
                console.olog = console.log;
                console.log = (message) => {
                    var div = document.createElement('div');
                    var log = document.getElementById("log");
                    div.innerHTML = message;
                    log.appendChild(div);
                    log.scrollTop = log.scrollHeight;
                    console.olog(message);
                };
                
                console.log('----------------- *** WELCOME *** --------------------');
                console.log('Welcome to the Font Awesome Icon Finder Demo.');
                console.log('This console will log out information about the search performance.');
                console.log('To get started, type something in the serarch field and notice how the icons are filterd');
                console.log('If you press enter the search is performed on the entire word, not just refined on the last letter you typed');
                console.log('Click on one of the icons to see it\'s data displayed next to the search button. It is this data which will be persisted to the umbraco database');
                console.log('------------------------------------------------------');
                const url = 'https://raw.githubusercontent.com/RobbieLD/FontAwesomeIconFinder/master/src/icons.json';
                
                // Create the manager
                const container = document.getElementById('container');
                const manager = new Manager(container);
                
                // Hook up the key event
                document.getElementsByClassName('iconSearch')[0].addEventListener('keyup', function(e) {
                    manager.handleKeyUp(e);
                });
                
                console.log('Starting icon loading from ' + url);

                // Setup the controls
                manager.setup(function(value) {
                    // don't really need to do anything here
                }, url);
            });

        </script>
    </body>
</html>